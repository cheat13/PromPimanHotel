@startuml

actor User
participant "Web" as A
participant "API" as B
participant "Database" as C

User -> A:1. เปิดหน้า room (Outoforder)
A -> B: เรียกข้อมูลห้องที่ยังไม่ได้ซ่อมทั้งหมดมาแสดง <<Get>>
B -> C: ดึงข้อมูล
C --> B: result
B --> A: ส่งข้อมูลทั้งหมดที่ยังไม่ได้ซ่อมมา

User -> A:2. กดปุ่มเพิ่มห้องซ่อม
A -> A: 2. ตรวจสอบข้อมูลถูกต้องครบถ้วนหรือยัง          
alt ถ้ากรอกข้อมูลไม่ครบจะไม่สามารถกดบันทึกได้
A -> A: 1.เลือกชั้น\n2.เลือกห้อง\n3.แจ้งปัญหาที่ต้องซ่อม 
end
A -> B: 3. [ข้อมูลกรอกถูกต้องครบถ้วนแล้ว]    <<Post>>
B -> C: 4.  เก็บข้อมูล
C --> B: result
B --> A: เพิ่มปัญหาตามข้อมูลที่ User กรอก
A --> User

User -> A:3. ลบข้อมูลห้องที่ถูกซ่อม 
A -> A: 1. ตรวจสอบข้อมูลว่าถูกต้องหรือยัง
A -> B: 2. [ถ้าข้อมูลถูกต้อง] ลบข้อมูลห้องที่ถูกแจ้งซ่อม <<Delete>>
B -> C: 3. ลบข้อมูล
C --> B: result 
B --> A: ข้อมูลที่มีการแจ้งซ่อมแล้วถูกลบ 
A --> User

@enduml


@startuml

actor User
participant "Web" as A
participant "API" as B
participant "Database" as C

User -> A: 1. เปิดหน้า room(Executive)
A -> B: เรียกข้อมูลห้องที่ผู้บริหารพักทั้งหมดมาแสดง <<Get>>
B -> C: ดึงข้อมูล
C --> B: result
B --> A: ส่งข้อมูลห้องที่ผู้บริหารพักทั้งหมดมาแสดง
User -> A:2. เพิ่มห้องผู้บริหาร
A -> A: ตรวจสอบข้อมูลถูกต้องครบถ้วนหรือยัง
           
alt ถ้ากรอกข้อมูลไม่ครบจะไม่สามารถกดบันทึกได้
A -> A: 1.เลือกชั้น\n2.เลือกห้อง\n3.ชื่อผู้บริหาร\n4.วันที่เข้าพัก
end

A -> B: [ข้อมูลกรอกถูกต้องครบถ้วนแล้ว]  <<Post>>
B -> C: เก็บข้อมูล
C --> B: result
B --> A: เพิ่มข้อมูลตามที่ User กรอก
A --> User

User -> A:3. ลบข้อมูลห้องผู้บริหารที่แจ้งออก 
A -> A: ตรวจสอบข้อมูลว่าถูกต้องหรือยัง
A -> B: [ถ้าข้อมูลถูกต้อง] ลบข้อมูลห้องผู้บริหารที่แจ้งออก<<Delete>>
B -> C: ลบข้อมูล
C --> B: result
B --> A: ข้อมูลที่มีการแจ้งออกผู้บริหารจะถูกลบ 
A --> User

@enduml


@startuml

actor User
participant "Web" as A
participant "API" as B
participant "Database" as C

A -> B: แสดงกระดิ่ง ขึ้นเตือนถ้า list การจองใกล้ถึงระยะเวลา 2 วัน 
B -> C: เช็คว่ามีตัวไหนอยู่ในระยะเวลา 2 วัน
C --> B: result 
B --> A: ถ้ามีจะส่ง icon รูปกระดิ่งแจ้งเตือนตรงเมนู Booking
A --> User: เห็นรูปกระดิ่งแจ้งเตือน

User -> A: กดเข้ามา Menu Booking
A -> B: เรียกข้อมูลการจองทั้งหมดมาแสดงเรียงตามวันที่ที่ใกล้ถึงอยู่ด้านบน\n[จะไม่แสดง List เข้าพักวันที่ก่อนเข้าพักวันที่ปัจจุบัน]<<Get>>
B -> C: ดึงข้อมูล
C --> B: result 
B --> A: ส่งข้อมูลการจองทั้งหมดมาแสดง

User -> A: กดเพิ่มข้อมุลการจอง
A -> A: ตรวจสอบข้อมูลว่าถูกต้องครบถ้วน
alt ถ้ากรอกข้อมูลไม่ครบจะไม่สามารถกดปุ่มถัดไปได้
A -> A: ส่งข้อมูลตามฟอร์ม
end
A -> A:  [ข้อมูลกรอกถูกต้องครบถ้วนแล้ว]\nกดปุ่มถัดไป  ข้อมูลจ่ายเงินล่วงหน้าจะถูกส่งข้อมูลมาหน้าคิดเงิน
A --> User: เห็นยอดเงินที่จ่าย
User -> A: กดปุ่มยืนยันหน้าคิดเงิน
A -> B: <<Post>> เพิ่มข้อมูลการจอง
B -> C: เก็บข้อมูล
C --> B: result
B --> A: เพิ่มข้อมูลการจองตามที่ User กรอก 

User -> A: กดปุ่มยืนยัน(confirm)
A -> B: จะเป็นการเปลี่ยนแปลงสถานะ จาก false เป็น true ใน list ก้อนนั้น<<Put ID>>
B -> C: มีการ Update สถานะ
C --> B: result
B --> A: ปุ่ม ยืนยัน(confirm) จะไม่สามารถกดได้อีก

User -> A: กดปุ่มแก้ไข
A ->A
note right
สามารถแก้ไขข้อมูลได้ทั้งฟอร์ม ยกเว้นเงินสำรองจ่าย

**ไม่สามารถแก้ไขเงินสำรองจ่ายได้แต่ให้เพิ่มสถานะเพิ่มเงินสำรองจ่าย
 default เป็น false แต่ถ้าเป็น true จะสามารถกรอกจำนวนเงินได้
end note
alt
A -> B: [ในกรณีไม่กดเลือกเพิ่มเงินสำรองจ่าย ข้อมูลถูกต้อง] เปลี่ยนแปลงของมูลที่แก้ไข <<Put ID>> 
end
B -> C: Update ข้อมูลที่แก้ไข 
alt
A -> A: [ในกรณีกดเลือกเพิ่มเงินสำรองจ่าย ข้อมูลถูกต้อง] จะเอาข้อมูลเพิ่มจ่ายเงินล่วงหน้าจะถูกส่งข้อมูลมาหน้าคิดเงิน
end
A --> User: เห็นยอดเงินที่จ่าย
User -> A: กดปุ่มยืนยันหน้าคิดเงิน
A -> B: [เงินสำรองจ่ายจะต้อง+เพิ่มเงินสำรองจ่าย]  เปลี่ยนแปลงข้อมูลที่แก้ไข<<Put ID>>
B -> C: Update ข้อมูลที่แก้ไข 
C --> B: result
B --> A: ข้อมูลมีการเปลี่ยนแปลงตามที่แ้ไข 

@enduml


